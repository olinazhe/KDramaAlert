<!DOCTYPE html>
<title>{% block title %}{% endblock %} - Flaskr</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Kanit&family=Montserrat&family=Open+Sans:wght@500&display=swap"
  rel="stylesheet"
/>
<body>
  <div class="full-body-container">
    <div id="container"></div>
  </div>

  <script>
    const drama = "{{drama}}";

    function pageTemplate(drama) {
      return `<div class='single-drama-container'>
          <img src=${drama.img} class='drama-image'>
          <div class='single-drama-info'>
            <div class='single-drama-row single-drama-row-1'>
              <h3 class='no-margin'>${drama.name}</h3>
              <div class='rating-with-image'>
                <img src="{{ url_for('static', filename='images/heart.svg') }}" class='single-drama-heart' />
                <p class='no-margin'>${drama.score}/10</p>
              </div>
            </div>
            <div class='single-drama-row single-drama-row-2'>
              <p class='no-margin'>${drama.year}</p>
              <p class='no-margin'>${drama.episodeCount}</p>
            </div>
            <p class='single-drama-synopsis'>${drama.synopsis}</p>
          </div>
        </div>
        <div class='recommend-drama-container'>
          <div class='recommend-drama-section'>
            <h3 class='recommend-drama-header'>Similar actors</h3>
          </div>
          <div class='recommend-drama-section'>
            <h3 class='recommend-drama-header'>Similar genres</h3>
          </div>
        </div>
        `;
        }

    function createPage(drama) {
      let tempDiv = document.createElement("div");
      tempDiv.innerHTML = pageTemplate(drama);
      document.getElementById("container").appendChild(tempDiv);
    }

    function fetchDrama(id) {
      fetch("/drama/" + id)
        .then((res) => res.json())
        .then((res) => createPage(res[0]));
    }

    fetchDrama(drama);
  </script>
</body>
